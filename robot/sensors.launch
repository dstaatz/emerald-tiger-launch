<!-- Copyright (C) 2020 Dylan Staatz - All Rights Reserved. -->

<launch>

    <arg name="imu_serial_port" default="/dev/ttyUSB0"/>
    <arg name="lidar_serial_port" default="/dev/rplidar"/>

    <!-- Reading imu data from bno055 through serial -->
    <include file="$(find ros_imu_bno055)/launch/imu.launch">
        <arg name="serial_port"         value="$(arg imu_serial_port)"/>
        <arg name="frame_id"            value="imu"/>
        <arg name="operation_mode"      value="IMU"/>
        <arg name="oscillator"          value="INTERNAL"/>
        <arg name="reset_orientation"   value="true"/>
        <arg name="frequency"           value="50"/>
        <arg name="use_magnetometer"    value="false"/>
        <arg name="use_temperature"     value="false"/>
    </include>

    <!-- Lidar scanner driver -->
    <node name="rplidarNode"  pkg="rplidar_ros"  type="rplidarNode"  output="screen">
        <param name="serial_port"           type="string"   value="$(arg imu_serial_port)"/>
        <param name="serial_baudrate"       type="int"      value="115200"/><!--A1/A2 -->
        <!--param name="serial_baudrate"    type="int"      value="256000"--><!--A3 -->
        <param name="frame_id"              type="string"   value="laser"/>
        <param name="inverted"              type="bool"     value="false"/>
        <param name="angle_compensate"      type="bool"     value="true"/>
    </node>

</launch>
